{"ast":null,"code":"var _jsxFileName = \"/home/shihtzhugh/proj/frontend/src/App.js\",\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Auth from './Auth';\nimport StockSearch from './SearchBar';\nimport ContractsTable from './ContractsTable';\nimport Filters from './Filters';\nimport SavedContracts from './SavedContracts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s2();\n  var _s = $RefreshSig$();\n  const [showAuth, setShowAuth] = useState(false);\n  const [currentUser, setCurrentUser] = useState({});\n  const [ticker, setTicker] = useState('');\n  const [savedContracts, setSavedContracts] = useState([]);\n  const [filters, setFilters] = useState({\n    expiration_date: '',\n    contract_type: '',\n    strike_price: ''\n  });\n  const handleAuthClose = user => {\n    if (user) {\n      setShowAuth(false);\n      setCurrentUser(user);\n    } else {\n      console.error('User data is not defined');\n    }\n  };\n  useEffect(() => {\n    console.log(currentUser);\n  }, [currentUser]);\n  const useFilteredContracts = (ticker, filters) => {\n    _s();\n    const [contracts, setContracts] = useState([]);\n    useEffect(() => {\n      if (!ticker) return;\n      const fetchContracts = async () => {\n        try {\n          const response = await fetch(`/api/get_contracts/${ticker}`);\n          const data = await response.json();\n          setContracts(data);\n        } catch (error) {\n          console.error('Error fetching contracts:', error);\n        }\n      };\n      fetchContracts();\n    }, [ticker]);\n    const filteredContracts = contracts.filter(contract => {\n      const {\n        expiration_date,\n        contract_type,\n        strike_price\n      } = filters;\n      return (!expiration_date || new Date(contract.expiration_date).toISOString().slice(0, 10) === new Date(expiration_date).toISOString().slice(0, 10)) && (!contract_type || contract.contract_type === contract_type) && (!strike_price || String(contract.strike_price) === strike_price);\n    });\n    return filteredContracts;\n  };\n  _s(useFilteredContracts, \"QpzW2h7uJqp0V1A4tTmN3o2xibQ=\");\n  const filteredContracts = useFilteredContracts(ticker, filters);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: currentUser.username ? /*#__PURE__*/_jsxDEV(\"span\", {\n        children: currentUser.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowAuth(true),\n        children: \"Sign Up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), showAuth && /*#__PURE__*/_jsxDEV(Auth, {\n      onClose: user => handleAuthClose(user)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(StockSearch, {\n      onSubmit: setTicker\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Filters, {\n      filters: filters,\n      onChange: setFilters\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), currentUser.id && /*#__PURE__*/_jsxDEV(ContractsTable, {\n      contracts: filteredContracts,\n      currentUser: currentUser,\n      savedContracts: savedContracts,\n      setSavedContracts: setSavedContracts\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this), currentUser.id && /*#__PURE__*/_jsxDEV(SavedContracts, {\n      userId: currentUser.id,\n      savedContracts: savedContracts\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n_s2(App, \"6BQ4HodAlL4l0V7TTgsdhe9WNKc=\", false, function () {\n  return [useFilteredContracts];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Auth","StockSearch","ContractsTable","Filters","SavedContracts","jsxDEV","_jsxDEV","App","_s2","_s","$RefreshSig$","showAuth","setShowAuth","currentUser","setCurrentUser","ticker","setTicker","savedContracts","setSavedContracts","filters","setFilters","expiration_date","contract_type","strike_price","handleAuthClose","user","console","error","log","useFilteredContracts","contracts","setContracts","fetchContracts","response","fetch","data","json","filteredContracts","filter","contract","Date","toISOString","slice","String","className","children","username","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onClose","onSubmit","onChange","id","userId","_c","$RefreshReg$"],"sources":["/home/shihtzhugh/proj/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Auth from './Auth';\nimport StockSearch from './SearchBar';\nimport ContractsTable from './ContractsTable';\nimport Filters from './Filters';\nimport SavedContracts from './SavedContracts';\n\nfunction App() {\n  const [showAuth, setShowAuth] = useState(false);\n  const [currentUser, setCurrentUser] = useState({});\n  const [ticker, setTicker] = useState('');\n  const [savedContracts, setSavedContracts] = useState([]);\n  const [filters, setFilters] = useState({\n    expiration_date: '',\n    contract_type: '',\n    strike_price: '',\n  });\n\n  const handleAuthClose = (user) => {\n    if (user) {\n      setShowAuth(false);\n      setCurrentUser(user);\n    } else {\n      console.error('User data is not defined');\n    }\n  };\n\n  useEffect(() => {\n    console.log(currentUser);\n  }, [currentUser]);\n  \n  const useFilteredContracts = (ticker, filters) => {\n    const [contracts, setContracts] = useState([]);\n    \n    useEffect(() => {\n      if (!ticker) return;\n  \n      const fetchContracts = async () => {\n        try {\n          const response = await fetch(`/api/get_contracts/${ticker}`);\n          const data = await response.json();\n          setContracts(data);\n        } catch (error) {\n          console.error('Error fetching contracts:', error);\n        }\n      };\n  \n      fetchContracts();\n    }, [ticker]);\n\n    const filteredContracts = contracts.filter((contract) => {\n      const { expiration_date, contract_type, strike_price } = filters;\n      return (\n        (!expiration_date ||\n          new Date(contract.expiration_date).toISOString().slice(0, 10) ===\n            new Date(expiration_date).toISOString().slice(0, 10)) &&\n        (!contract_type || contract.contract_type === contract_type) &&\n        (!strike_price || String(contract.strike_price) === strike_price)\n      );\n    });\n    \n    return filteredContracts;\n  };\n\n  const filteredContracts = useFilteredContracts(ticker, filters);\n\n  return (\n    <div className='App'>\n      <header>\n        {currentUser.username ? (\n          <span>{currentUser.username}</span>\n        ) : (\n          <button onClick={() => setShowAuth(true)}>Sign Up</button>\n        )}\n      </header>\n      {showAuth && <Auth onClose={(user) => handleAuthClose(user)} />}\n      <StockSearch onSubmit={setTicker}/>\n      <Filters filters={filters} onChange={setFilters} />\n      {currentUser.id && (\n        <ContractsTable \n          contracts={filteredContracts} \n          currentUser={currentUser} \n          savedContracts={savedContracts} \n          setSavedContracts={setSavedContracts}\n        />\n      )}\n      {currentUser.id && (\n        <SavedContracts \n          userId={currentUser.id} \n          savedContracts={savedContracts} \n        />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}